{"version":3,"sources":["Notifications.coffee","jquery.cssanim.coffee","jquery.csslater.coffee"],"names":["Notification","Notifications","template","elem1","this","elem","jQuery","Error","addClass","$","window","on","resizeAll","bind","ids","register","id","o","get","th","unregister","test","setTimeout","_this","add","type","body","timeout","options","cb","close","closeAll","main","Object","keys","map","p","resizeBox","randomId","Math","random","toString","replace","displayMessage","displayConfirm","message","confirm_label","cancel_label","displayPrompt","main1","width","main_elem","substr","toUpperCase","isProgress","RealTimeout","isInput","isConfirm","Timeout","updateText","closed","rebuildMsg","appendTo","remove","setProgress","progress","isPrompt","buildPrompt","buildConfirm","outerWidth","outerHeight","css","transform","animate","scale","cssLater","style","callBack","event","res","called","console","info","warn","append","html","escape","isList","value","String","setBody","empty","caption","cancel","button","cButton","focus","scrollLeft","input","e","keyCode","trigger","val","percent_","circle","offset","percent","min","length","animation-play-state","stroke-dasharray","data","opacity","removeClass","setDesign","char","stop","slideUp","transform_property","cssHooks","computed","match","getComputedStyle","parseFloat","set","transforms","join","fx","step","now","document","fn","readdClass","class_name","removeLater","time","hideLater","addClassLater","name"],"mappings":"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","file":"zeronet-notifications.min.js","sourcesContent":["template=\"\"\"\n    <div class=\"zNotifications-notification\"><span class=\"notification-icon\">!</span> <span class=\"body\">Test notification</span><a class=\"close\" href=\"#Close\">&times;</a>\n      <div style=\"clear: both\"></div>\n    </div>\n\"\"\"\n\nclass Notifications\n\tconstructor: (@elem) ->\n\t\tif typeof(jQuery)!=\"function\"\n\t\t\tthrow new Error(\"jQuery Required!\")\n\t\t@elem.addClass(\"zNotifications-notifications\")\n\t\t$(window).on(\"resize\",@resizeAll.bind(@))\n\t\t@\n\n\tids: {}\n\n\tregister: (id,o) ->\n\t\tif (@ids[id])\n\t\t\tthrow new Error(\"UniqueError: \"+id+\" is already registered\")\n\t\t@ids[id]=o\n\n\tget: (id,th) ->\n\t\tif (!@ids[id] && th)\n\t\t\tthrow new Error(\"UndefinedError: \"+id+\" is not registered\")\n\t\treturn @ids[id]\n\n\tunregister: (id,o) ->\n\t\tif (!@ids[id])\n\t\t\tthrow new Error(\"UndefinedError: \"+id+\" is not registered\")\n\t\tdelete @ids[id]\n\n\t# TODO: add unit tests\n\ttest: ->\n\t\tsetTimeout (=>\n\t\t\t@add(\"connection\", \"error\", \"Connection lost to <b>UiServer</b> on <b>localhost</b>!\")\n\t\t\t@add(\"message-Anyone\", \"info\", \"New  from <b>Anyone</b>.\")\n\t\t), 1000\n\t\tsetTimeout (=>\n\t\t\t@add(\"connection\", \"done\", \"<b>UiServer</b> connection recovered.\", 5000)\n\t\t), 3000\n\n\n\tadd: (id, type, body, timeout=0, options={}, cb) ->\n\t\treturn new Notification @, {id,type,body,timeout,options,cb}\n\n\tclose: (id) ->\n\t\t@get(id,true).close(\"script\",true)\n\n\tcloseAll: () ->\n\t\tmain=@\n\t\tObject.keys(@ids).map (p) ->\n\t\t\tmain.close p\n\t\treturn\n\n\tresizeAll: () ->\n\t\tmain=@\n\t\tObject.keys(@ids).map (p) ->\n\t\t\tmain.get(p,true).resizeBox()\n\t\treturn\n\n\trandomId: ->\n\t\treturn \"msg\"+Math.random().toString().replace(/0/g,\"\").replace(/\\./g,\"\")\n\n\tdisplayMessage: (type, body, timeout=0,cb) ->\n\t\treturn add(randomId(),type,body,timeout,{},cb)\n\n\tdisplayConfirm: (message, confirm_label, cancel_label=false, cb) ->\n\t\treturn add(randomId(),\"confirm\",message, 0, {confirm_label,cancel_label},cb)\n\n\tdisplayPrompt: (message, confirm_label, cancel_label=false, cb) ->\n\t\treturn add(randomId(),\"prompt\",message, 0, {confirm_label,cancel_label},cb)\n\nclass Notification\n\tconstructor: (@main,message) -> #(@id, @type, @body, @timeout=0) ->\n\t\t@\n\n\t\t@main_elem=@main.elem\n\t\t@options=message.options\n\t\t@cb=message.cb\n\t\t@id = message.id.replace /[^A-Za-z0-9]/g, \"\"\n\n\t\t# Close notifications with same id\n\t\tif @main.get(@id)\n\t\t\t@main.get(@id).close()\n\n\n\t\t@type=message.type\n\t\t@[\"is\"+@type.substr(0,1).toUpperCase()+@type.substr(1)]=true\n\n\t\tif @isProgress\n\t\t\t@RealTimeout=message.timeout #prevent from launching too early\n\t\telse if @isInput or @isConfirm #ignore\n\t\telse\n\t\t\t@Timeout=message.timeout\n\n\t\t@main.register(@id,@) #register\n\n\t\t# Create element\n\t\t@elem = $(template)\n\t\tif @isProgress\n\t\t\t@elem.addClass(\"notification-done\")\n\t\t# Update text\n\t\t@updateText @type\n\n\t\tbody=message.body\n\t\t@body=body\n\t\t@closed=false\n\n\t\t@rebuildMsg \"\"\n\n\t\t@elem.appendTo(@main_elem)\n\n\t\t# Timeout\n\t\tif @Timeout\n\t\t\t$(\".close\", @elem).remove() # No need of close button\n\t\t\tsetTimeout (=>\n\t\t\t\t@close()\n\t\t\t), @Timeout\n\n\t\t#Init main stuff\n\t\tif @isProgress\n\t\t\t@setProgress(@options.progress||0)\n\t\tif @isPrompt\n\t\t\t@buildPrompt($(\".body\", @elem), @options.confirm_label||\"Ok\", @options.cancel_label||false)\n\t\tif @isConfirm\n\t\t\t@buildConfirm($(\".body\", @elem), @options.confirm_label||\"Ok\", @options.cancel_label||false)\n\n\t\t# Animate\n\t\twidth = @elem.outerWidth()\n\t\t#if not @Timeout then width += 20 # Add space for close button\n\t\tif @elem.outerHeight() > 55 then @elem.addClass(\"long\")\n\t\t@elem.css({\"width\": \"50px\", \"transform\": \"scale(0.01)\"})\n\t\t@elem.animate({\"scale\": 1}, 800, \"easeOutElastic\")\n\t\t@elem.animate({\"width\": width}, 700, \"easeInOutCubic\")\n\t\t$(\".body\", @elem).cssLater(\"box-shadow\", \"0px 0px 5px rgba(0,0,0,0.1)\", 1000)\n\t\tsetTimeout(@resizeBox.bind(@),1500)\n\n\t\t# Close button or Confirm button\n\t\t$(\".close\", @elem).on \"click\", =>\n\t\t\t@close(\"user\",true)\n\t\t\treturn false\n\t\t$(\".zNotifications-button\", @elem).on \"click\", =>\n\t\t\t@close()\n\t\t\treturn false\n\n\t\t# Select list\n\t\t$(\".select\", @elem).on \"click\", =>\n\t\t\t@close()\n\n\tresizeBox: ->\n\t\t@elem[0].style=\"\"\n\t\t#@elem.css(\"width\",\"inherit\")\n\n\tcallBack: (event,res) ->\n\t\tif @called\n\t\t\tthrow new Error(\"CalbackError: Callback was called twice\")\n\t\t@called=true\n\t\tif typeof(@cb) != \"function\"\n\t\t\tconsole.warn(\"Silently failing callback @ %s: %s & '%s'\",@id,event,res)\n\t\t\treturn\n\t\tconsole.info(\"Event @ %s %s %s\",@id,event,res)\n\t\t@cb(event,res)\n\n\trebuildMsg: (append) ->\n\t\t@append=$(append)\n\t\tif typeof(@body) == \"string\"\n\t\t\t$(\".body\", @elem).html(\"<span class=\\\"message\\\">\"+@escape(@body)+\"</span>\").append(@append)\n\t\t\tif @isList or @isPrompt or @isConfirm\n\t\t\t\t$(\".message\", @elem).addClass(\"message-non-center\")\n\t\telse\n\t\t\t$(\".body\", @elem).html(\"\").append(@body,@append)\n\n\tescape: (value) ->\n \t\treturn String(value).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/\"/g, '&quot;').replace(/&lt;([\\/]{0,1}(br|b|u|i))&gt;/g, \"<$1>\") # Escape and Unescape b, i, u, br tags\n\n\tsetBody: (body) ->\n\t\t@body=body\n\t\tif typeof(@body) == \"string\"\n\t\t\t@body=$(\"<span>\"+@escape(@body)+\"</span>\")\n\t\t\t$(\".body .message\", @elem).empty().append(@body)\n\t\telse\n\t\t\t$(\".body .message\", @elem).empty().append(@body)\n\t\t@resizeBox()\n\t\treturn @\n\n\tbuildConfirm: (body,caption,cancel=false) ->\n\t\tbutton = $(\"<a href='##{caption}' class='zNotifications-button zNotifications-button-confirm'>#{caption}</a>\") # Add confirm button\n\t\tbutton.on \"click\", =>\n\t\t\t@callBack \"action\",true\n\t\t\treturn false\n\t\tbody.append(button)\n\t\tif (cancel)\n\t\t\tcButton = $(\"<a href='##{cancel}' class='zNotifications-button zNotifications-button-cancel'>#{cancel}</a>\") # Add confirm button\n\t\t\tcButton.on \"click\", =>\n\t\t\t\t@callBack \"action\",false\n\t\t\t\treturn false\n\t\t\tbody.append(cButton)\n\n\t\tbutton.focus()\n\t\t$(\".notification\").scrollLeft(0)\n\n\n\tbuildPrompt: (body,caption,cancel=false) ->\n\t\tinput = $(\"<input type='text' class='input'/>\") # Add input\n\t\tinput.on \"keyup\", (e) => # Send on enter\n\t\t\tif e.keyCode == 13\n\t\t\t\tbutton.trigger \"click\" # Response to confirm\n\t\tbody.append(input)\n\n\t\tbutton = $(\"<a href='##{caption}' class='zNotifications-button zNotifications-button-confirm'>#{caption}</a>\") # Add confirm button\n\t\tbutton.on \"click\", => # Response on button click\n\t\t\t@callBack \"action\",input.val()\n\t\t\treturn false\n\t\tbody.append(button)\n\t\tif (cancel)\n\t\t\tcButton = $(\"<a href='##{cancel}' class='zNotifications-button zNotifications-button-cancel'>#{cancel}</a>\") # Add confirm button\n\t\t\tcButton.on \"click\", =>\n\t\t\t\t@callBack \"action\",false\n\t\t\t\treturn false\n\t\t\tbody.append(cButton)\n\n\t\tinput.focus()\n\t\t$(\".notification\").scrollLeft(0)\n\n\tsetProgress: (percent_) ->\n\t\tif typeof(percent_) != \"number\"\n\t\t\tthrow new Error(\"TypeError: Progress must be int\")\n\t\t@resizeBox()\n\t\tpercent = Math.min(100, percent_)/100\n\t\toffset = 75-(percent*75)\n\t\tcircle = \"\"\"\n\t\t\t<div class=\"circle\"><svg class=\"circle-svg\" width=\"30\" height=\"30\" viewport=\"0 0 30 30\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\">\n  \t\t\t\t<circle r=\"12\" cx=\"15\" cy=\"15\" fill=\"transparent\" class=\"circle-bg\"></circle>\n  \t\t\t\t<circle r=\"12\" cx=\"15\" cy=\"15\" fill=\"transparent\" class=\"circle-fg\" style=\"stroke-dashoffset: #{offset}\"></circle>\n\t\t\t</svg></div>\n\t\t\"\"\"\n\t\twidth = $(\".body .message\", @elem).outerWidth()\n\t\t#$(\".body .message\", @elem).html(message.params[1])\n\t\tif not $(\".circle\", @elem).length\n\t\t\t@rebuildMsg circle\n\t\tif $(\".body .message\", @elem).css(\"width\") == \"\"\n\t\t\t$(\".body .message\", @elem).css(\"width\", width)\n\t\t$(\".body .circle-fg\", @elem).css(\"stroke-dashoffset\", offset)\n\t\tif percent > 0\n\t\t\t$(\".body .circle-bg\", @elem).css {\"animation-play-state\": \"paused\", \"stroke-dasharray\": \"180px\"}\n\n\t\tif $(\".notification-icon\", @elem).data(\"done\")\n\t\t\treturn false\n\t\telse if percent_ >= 100  # Done\n\t\t\t$(\".circle-fg\", @elem).css(\"transition\", \"all 0.3s ease-in-out\")\n\t\t\tsetTimeout (->\n\t\t\t\t$(\".notification-icon\", @elem).css {transform: \"scale(1)\", opacity: 1}\n\t\t\t\t$(\".notification-icon .icon-success\", @elem).css {transform: \"rotate(45deg) scale(1)\"}\n\t\t\t), 300\n\t\t\tif @RealTimeout\n\t\t\t\t$(\".close\", @elem).remove() # It's already closing\n\t\t\t\tsetTimeout (=>\n\t\t\t\t\t@close(\"auto\",true)\n\t\t\t\t), @RealTimeout\n\t\t\t$(\".notification-icon\", @elem).data(\"done\", true)\n\t\telse if percent_ < 0  # Error\n\t\t\t$(\".body .circle-fg\", @elem).css(\"stroke\", \"#ec6f47\").css(\"transition\", \"transition: all 0.3s ease-in-out\")\n\t\t\tsetTimeout (=>\n\t\t\t\t$(\".notification-icon\", @elem).css {transform: \"scale(1)\", opacity: 1}\n\t\t\t\t@elem.removeClass(\"notification-done\").addClass(\"notification-error\")\n\t\t\t\t$(\".notification-icon .icon-success\", @elem).removeClass(\"icon-success\").html(\"!\")\n\t\t\t), 300\n\t\t\t$(\".notification-icon\", @elem).data(\"done\", true)\n\t\treturn @\n\n\tsetDesign: (char,type) ->\n\t\t$(\".notification-icon\", @elem).html(char)\n\t\t@elem.addClass(\"notification-\"+type)\n\n\tupdateText: (type) ->\n\t\tswitch(type)\n\t\t\twhen \"error\" then @setDesign \"!\",\"error\"\n\t\t\twhen \"done\" then @setDesign \"<div class='icon-success'></div>\",\"done\"\n\t\t\twhen \"progress\" then @setDesign \"<div class='icon-success'></div>\",\"progress\"\n\t\t\twhen \"ask\", \"list\", \"prompt\", \"confirm\" then @setDesign \"?\",\"ask\"\n\t\t\twhen \"info\" then @setDesign \"i\",\"info\"\n\t\t\telse throw new Error(\"UnknownNotificationType: Type \"+type+\" is not known\")\n\n\tclose: (event=\"auto\",cb=false) ->\n\t\tif @closed\n\t\t\treturn\n\t\t@closed=true\n\t\tif (cb||!@called)\n\t\t\t@callBack event\n\t\t$(\".close\", @elem).remove() # It's already closing\n\t\t@main.unregister(@id)\n\t\t@elem.stop().animate {\"width\": 0, \"opacity\": 0}, 700, \"easeInOutCubic\"\n\t\telem=@elem\n\t\t@elem.slideUp 300, (-> elem.remove())\n\t\treturn @main\n\nwindow.Notifications = Notifications\n","jQuery.cssHooks.scale = {\n\tget: (elem, computed) ->\n\t\tmatch = window.getComputedStyle(elem)[transform_property].match(\"[0-9\\.]+\")\n\t\tif match\n\t\t\tscale = parseFloat(match[0])\n\t\t\treturn scale\n\t\telse\n\t\t\treturn 1.0\n\tset: (elem, val) ->\n\t\ttransforms = window.getComputedStyle(elem)[transform_property].match(/[0-9\\.]+/g)\n\t\tif (transforms)\n\t\t\ttransforms[0] = val\n\t\t\ttransforms[3] = val\n\t\t\telem.style[transform_property] = 'matrix('+transforms.join(\", \")+')'\n\t\telse\n\t\t\telem.style[transform_property] = \"scale(\"+val+\")\"\n}\n\njQuery.fx.step.scale = (fx) ->\n\tjQuery.cssHooks['scale'].set(fx.elem, fx.now)\n\nif (window.getComputedStyle(document.body).transform)\n\ttransform_property = \"transform\"\nelse\n\ttransform_property = \"webkitTransform\"\n","jQuery.fn.readdClass = (class_name) ->\n\telem = @\n\telem.removeClass class_name\n\tsetTimeout ( ->\n\t\telem.addClass class_name\n\t), 1\n\treturn @\n\njQuery.fn.removeLater = (time = 500) ->\n\telem = @\n\tsetTimeout ( ->\n\t\telem.remove()\n\t), time\n\treturn @\n\njQuery.fn.hideLater = (time = 500) ->\n\telem = @\n\tsetTimeout ( ->\n\t\tif elem.css(\"opacity\") == 0\n\t\t\telem.css(\"display\", \"none\")\n\t), time\n\treturn @\n\njQuery.fn.addClassLater = (class_name, time = 5) ->\n\telem = @\n\tsetTimeout ( ->\n\t\telem.addClass(class_name)\n\t), time\n\treturn @\n\njQuery.fn.cssLater = (name, val, time = 500) ->\n\telem = @\n\tsetTimeout ( ->\n\t\telem.css name, val\n\t), time\n\treturn @"]}